<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
<script type="text/javascript"
	src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript"
	src="http://underscorejs.org/underscore-min.js"></script>

</head>
<body>



</body>

<script type="text/javascript">
	var data = [ {
		Gender : "Male",
		Nationality : "Taiwan",
		Name : "Ryan",
		Age : 38
	}, {
		Gender : "Male",
		Name : "Alex",
		Nationality : "USA",
		Age : 36
	}, {
		Gender : "Female",
		Name : "Amy",
		Nationality : "Taiwan",
		Age : 30
	}, {
		Gender : "Female",
		Name : "Daisy",
		Nationality : "Taiwan",
		Age : 28
	}, {
		Gender : "Female",
		Name : "Miho",
		Nationality : "Japan",
		Age : 45
	}, {
		Gender : "Male",
		Name : "Herschel",
		Nationality : "India",
		Age : 44
	}, {
		Gender : "Female",
		Name : "Agna",
		Nationality : "India",
		Age : 26
	}, {
		Gender : "Male",
		Name : "Murat",
		Nationality : "Turkey",
		Age : 36
	}, {
		Gender : "Female",
		Name : "Upasana",
		Nationality : "India",
		Age : 38
	} ];

	var groupByKey = "Gender";
	//var groupByKey = "Nationality";

	var sortByKey = "Age";

	var groupedData = _(data).chain().groupBy(function(x) {
		return x[groupByKey];
	}).value();

	console.log(groupedData);

	_.each(groupedData, function(data, key) {
		//console.log(key);

		var sortedData = _.sortBy(data, function(x) {
			return x[sortByKey];
		});

		groupedData[key] = sortedData;
	});

	//console.log(groupedData);

	_.each(groupedData, function(value, key) {
		console.log(key);

		_.each(value, function(x) {
			console.log(x);
		});
	});
</script>

</html>